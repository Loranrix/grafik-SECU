# üîê CONNEXION VPS GRAFIK - GUIDE COMPLET

**Date de cr√©ation** : 2025-01-XX  
**Projet** : Grafik - Syst√®me de pointage employ√©s  
**Serveur** : napopizza.lv (195.35.56.221)

---

## üîë INFORMATIONS DE CONNEXION SSH

### Commande de connexion (PowerShell)

```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "VOTRE_COMMANDE"
```

### D√©tails de connexion

```
Host:     195.35.56.221
Port:     51970
User:     root
Password: LoranRix70*13
Chemin:   /home/napopizza.lv/public_html/grafik
```

‚ö†Ô∏è **Note** : La hostkey n'est plus n√©cessaire avec `-batch`, plink l'accepte automatiquement.

---

## üìÇ STRUCTURE SUR LE VPS

```
/home/napopizza.lv/public_html/grafik/
‚îú‚îÄ‚îÄ admin/              # Interface administrateur
‚îú‚îÄ‚îÄ employee/           # Interface employ√©
‚îú‚îÄ‚îÄ classes/            # Classes PHP
‚îú‚îÄ‚îÄ api/                # ‚ùå N'EXISTE PAS sur le VPS
‚îú‚îÄ‚îÄ includes/           # Configuration
‚îú‚îÄ‚îÄ css/                # Styles
‚îú‚îÄ‚îÄ database/           # Scripts SQL
‚îú‚îÄ‚îÄ logs/               # Logs PHP
‚îî‚îÄ‚îÄ .git/               # Repository Git
```

---

## üîÑ COMPARAISON DES VERSIONS

### üìç LOCAL (Windows)
- **Chemin** : `C:\Users\Loran\Desktop\SITES\grafik`
- **Repository** : `https://github.com/Loranrix/grafik.git`
- **Branche** : `master`
- **Fichiers sp√©ciaux** :
  - `api/` (dossier complet)
  - `classes/Client.php`
  - `classes/Serveur.php`

### üåê VPS (Serveur)
- **Chemin** : `/home/napopizza.lv/public_html/grafik`
- **Branche** : `master`
- **Statut** : ‚úÖ **VERSION FONCTIONNELLE ET VALID√âE**
  - ‚úÖ Interface employee fonctionne correctement sur smartphone
  - ‚úÖ Application op√©rationnelle en production
- **Fichiers manquants** (non n√©cessaires pour le fonctionnement) :
  - ‚ùå `api/` (dossier n'existe pas - pas utilis√© en production)
  - ‚ùå `classes/Client.php` (n'existe pas - pas utilis√© en production)
  - ‚ùå `classes/Serveur.php` (n'existe pas - pas utilis√© en production)

### üì¶ GITHUB
- **Repository** : `https://github.com/Loranrix/grafik`
- **Remote** : `origin`

---

## üöÄ COMMANDES UTILES

### Se connecter au r√©pertoire grafik
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && pwd"
```

### Voir le statut Git sur le VPS
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git status"
```

### Voir les derniers commits Git sur le VPS
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git log --oneline -5"
```

### Lister les fichiers sur le VPS
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && find . -type f -name '*.php' | head -20"
```

### Voir les logs PHP
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "tail -50 /home/napopizza.lv/public_html/grafik/logs/php-errors.log"
```

### V√©rifier la base de donn√©es
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "mysql -u root -p'9BvgCl9ewttgcc' napo_grafik -e 'SHOW TABLES;'"
```

### Voir les employ√©s dans la DB
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "mysql -u root -p'9BvgCl9ewttgcc' napo_grafik -e 'SELECT id, first_name, last_name, pin FROM employees;'"
```

### Synchroniser le VPS avec GitHub
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git fetch origin && git pull origin master"
```

‚ö†Ô∏è **Attention** : Cette commande peut √©craser les modifications locales sur le VPS.

---

## üåê ACC√àS WEB

- **Interface employ√©** : https://grafik.napopizza.lv/employee/
- **Interface admin** : https://grafik.napopizza.lv/admin/
- **Test connexion DB** : https://grafik.napopizza.lv/test_connection.php

---

## üîê BASE DE DONN√âES

```
Host:     localhost (sur le VPS)
Database: napo_grafik
User:     napo_admin
Password: Superman13**
```

### Commande MySQL root
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "mysql -u root -p'9BvgCl9ewttgcc' napo_grafik"
```

---

## üìù NOTES IMPORTANTES

- ‚úÖ **VERSION VPS VALID√âE** : L'interface employee fonctionne correctement sur smartphone
- Le VPS utilise le m√™me repository Git que le local (`https://github.com/Loranrix/grafik`)
- Le VPS a un dossier `.git` donc peut √™tre synchronis√© avec `git pull`
- Les fichiers `api/`, `Client.php` et `Serveur.php` existent en local mais pas sur le VPS (non n√©cessaires pour la version en production)
- Le VPS a de nombreuses modifications non commit√©es qui pourraient √™tre perdues lors d'un `git pull`
- **Recommandation** : Ne pas synchroniser le VPS tant que tout fonctionne correctement

---

## üîß D√âPLOIEMENT

### √âtape 1: V√©rifier l'√©tat actuel
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git status"
```

### √âtape 2: Sauvegarder les modifications (si n√©cessaire)
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git stash"
```

### √âtape 3: Mettre √† jour depuis GitHub
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && git fetch origin && git pull origin master"
```

### √âtape 4: Installer/Mettre √† jour les d√©pendances Composer
```powershell
& "C:\Program Files\PuTTY\plink.exe" -batch -ssh -P 51970 -l root -pw LoranRix70*13 195.35.56.221 "cd /home/napopizza.lv/public_html/grafik && composer install --no-dev --optimize-autoloader"
```

---

**‚ú® Ce fichier documente la m√©thode de connexion au VPS et l'√©tat de synchronisation entre LOCAL, VPS et GITHUB.**






